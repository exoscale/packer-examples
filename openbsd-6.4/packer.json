{
    "variables": {
        "image_url": "https://cdn.openbsd.org/pub/OpenBSD/6.6/amd64/install66.iso",
        "image_checksum_url": "https://cdn.openbsd.org/pub/OpenBSD/6.6/amd64/SHA256",
        "image_checksum_type": "sha256",
        "image_name": "openbsd-6.6",
        "ssh_password": "SAME_AS_AUTOINSTALL"
    },
    "builders": [
        {
            "type": "qemu",
            "cpus": 2,
            "disk_interface": "virtio",
            "disk_size": 12000,
            "format": "qcow2",
            "http_directory": "docroot/",
            "iso_checksum_type": "{{user `image_checksum_type`}}",
            "iso_checksum_url": "{{user `image_checksum_url`}}",
            "iso_url": "{{user `image_url`}}",
            "shutdown_command": "/sbin/halt -p",
            "ssh_timeout": "10m",
            "ssh_password": "{{user `ssh_password`}}",
            "ssh_username": "root",
            "use_default_display": true,
            "vm_name": "{{user `image_name`}}.qcow2",
            "vnc_port_max": 5910,
            "vnc_port_min": 5910,
            "boot_wait": "30s",
            "boot_command": [
                "http://{{ .HTTPIP }}:{{ .HTTPPort }}/autoinstall.conf<enter>",
                "I<enter>"
            ]
        }
    ],
    "provisioners": [
        {
            "type": "file",
            "source": "openbsd-cloud-init/cloud-init.pl",
            "destination": "/usr/local/libdata/cloud-init.pl"
        },
        {
            "type": "shell",
            "inline": ["perl /usr/local/libdata/cloud-init.pl deploy"]
        },
        {
            "type": "file",
            "source": "{{user `image_name`}}/hostname.vio0",
            "destination": "/etc/hostname.vio0"
        }
    ]
}
